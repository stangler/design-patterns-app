# デザインパターン学習サイト

デザインパターンを学習し、理解を深めるためのインタラクティブな学習サイトです。

## プロジェクト概要

このプロジェクトはNext.jsを使用して構築されたデザインパターン学習プラットフォームです。ユーザーはサインインして様々なデザインパターンを学習し、理解を深めることができます。

### 主な機能

- **デザインパターン学習**: 23種類のデザインパターンの学習コンテンツ
- **ユーザー認証**: Supabaseによる認証機能
- **インタラクティブな学習**: クイズや実装課題
- **ダークモード**: ライト/ダークテーマの切り替え

## 使用技術

### フロントエンド
- **Next.js 16.1.6**: Reactフレームワーク（App Router）
- **React 19.2.3**: UIライブラリ
- **TypeScript 5**: 型付け言語
- **Tailwind CSS 4**: スタイリングフレームワーク
- **Supabase**: 認証とデータベース

### コンテンツ処理
- **remark**: Markdown処理
- **Shiki**: シンタックスハイライト

### 開発ツール
- **Vitest**: テストフレームワーク
- **ESLint**: コード品質チェック
- **Playwright**: E2Eテスト

## プロジェクト構成

```
src/
├── app/                    # Next.js App Router
│   ├── auth/              # 認証関連ページ
│   ├── patterns/          # デザインパターンページ
│   │   ├── page.tsx       # 一覧ページ
│   │   └── [id]/page.tsx  # 詳細ページ
│   ├── layout.tsx         # ルートレイアウト
│   └── page.tsx           # ホームページ
├── components/            # Reactコンポーネント
│   ├── auth/             # 認証コンポーネント
│   ├── layout/           # レイアウトコンポーネント
│   └── patterns/         # パターン関連コンポーネント
├── domain/               # ドメインデータ
│   └── patterns/         # パターン別コンテンツ
│       ├── creational/   # 生成パターン
│       ├── structural/   # 構造パターン
│       └── behavioral/   # 振る舞いパターン
├── hooks/                # カスタムフック
├── lib/                  # ライブラリ関数
├── types/                # TypeScript型定義
└── utils/                # ユーティリティ関数
```

## デザインパターン一覧

### 生成パターン (Creational)
| パターン | 難易度 | 説明 |
|---------|--------|------|
| Singleton | ★☆☆ | クラスのインスタンスを1つだけ保証する |
| Factory Method | ★★☆ | オブジェクトの生成をサブクラスに委ねる |
| Abstract Factory | ★★★ | 関連するオブジェクトのファミリーを生成する |
| Builder | ★★☆ | 複雑なオブジェクトを段階的に構築する |
| Prototype | ★★☆ | 既存のオブジェクトをクローンする |

### 構造パターン (Structural)
| パターン | 難易度 | 説明 |
|---------|--------|------|
| Adapter | ★★☆ | インターフェースを別のインターフェースに変換する |
| Bridge | ★★★ | 抽象と実装を分離する |
| Composite | ★★☆ | オブジェクトをツリー構造に組み合わせる |
| Decorator | ★★☆ | オブジェクトに責務を動的に追加する |
| Facade | ★☆☆ | シンプルなインターフェースを提供する |
| Flyweight | ★★★ | 共通部分を効率的に共有する |
| Proxy | ★★☆ | 別のオブジェクトへのアクセスを制御する |

### 振る舞いパターン (Behavioral)
| パターン | 難易度 | 説明 |
|---------|--------|------|
| Chain of Responsibility | ★★★ | リクエストをハンドラーチェーンに渡す |
| Command | ★★☆ | リクエストをオブジェクトとしてカプセル化する |
| Iterator | ★☆☆ | 要素に順次アクセスする |
| Mediator | ★★★ | 直接的な依存関係を減らす |
| Memento | ★★★ | オブジェクトの状態を保存する |
| Observer | ★☆☆ | 複数の依存オブジェクトに通知する |
| State | ★★☆ | 状態の変化に応じて振る舞いを変える |
| Strategy | ★☆☆ | 交換可能なアルゴリズムをカプセル化する |
| Template Method | ★★☆ | アルゴリズムの骨格を定義する |
| Visitor | ★★★ | 操作をオブジェクトから分離する |

各パターンには以下が含まれます:
- 解説（explanation.md）
- 問題（question.md）
- 模範解答（solution.ts）

## パフォーマンス最適化

### ページ遷移の高速化

一覧ページから詳細ページへの遷移を高速化するために以下の実装を行っています：

1. **Link コンポーネントの使用**
   - Next.js の `<Link>` コンポーネントによりクライアントサイドナビゲーションを実現
   - リンクホバー時のプリフェッチにより、遷移が即座に感じられる

2. **並列データ取得**
   - 詳細ページで `Promise.all` を使用し、Markdown処理とシンタックスハイライトを並列実行
   - 従来の直列実行と比較して処理時間を大幅に短縮

3. **generateStaticParams**
   - ビルド時にパスを事前生成する仕組みを実装
   - 認証を使用するため動的レンダリングになるが、将来的な静的生成に対応

## 認証機能

Supabaseを使用して以下の機能を提供:

- メール/パスワードによるサインアップとサインイン
- パスワードリセット
- メール認証
- セッション管理

## 環境構築

### 前提条件

- Node.js 18以上
- pnpm (推奨) または npm/yarn

### インストール

```bash
# 依存関係のインストール
pnpm install

# 環境変数の設定
cp .env.local.example .env.local
# .env.local を編集してSupabaseのURLとAnon Keyを設定
```

### 開発サーバーの起動

```bash
pnpm dev
```

[http://localhost:3000](http://localhost:3000) にアクセスしてアプリケーションを確認できます。

### ビルド

```bash
pnpm build
```

### テスト

```bash
# ESLint
pnpm lint

# 単体テスト
pnpm test

# ウォッチモード
pnpm test:watch

# タイプチェック
pnpm type-check

# E2Eテスト
pnpm exec playwright test
```

## テスト結果

- **vitest**: テスト結果は `test-results/` ディレクトリに保存されます
- **Playwright**: E2Eテスト結果は `playwright-report/` ディレクトリに保存されます

## 新しいデザインパターンの追加

1. `src/domain/patterns/{category}/{pattern-id}/` ディレクトリを作成
2. 以下のファイルを追加:
   - `explanation.md`: パターンの解説
   - `question.md`: 問題文
   - `solution.ts`: 模範解答コード
3. `src/utils/patterns.ts` の `designPatterns` 配列にパターン情報を追加

## デプロイ

Vercelへのデプロイが推奨されています:

1. Vercelアカウントを作成
2. GitHubリポジトリを接続
3. 環境変数を設定
4. 自動デプロイを有効化

## ライセンス

このプロジェクトはMITライセンスの下で提供されています。

## 貢献

プルリクエストは大歓迎です。貢献する前にIssueを作成して議論してください。

## バージョン履歴

- **0.1.0**: 初期リリース
  - 23種類のデザインパターン学習機能
  - ユーザー認証
  - パフォーマンス最適化（Link、並列取得）